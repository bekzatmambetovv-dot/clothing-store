<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–°—é—Ä–ø—Ä–∏–∑ –¥–ª—è —Å–µ—Å—Ç—Ä—ë–Ω–∫–∏</title>
  <style>
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: radial-gradient(ellipse at top, #1e0a3c 0%, #0a0a1a 50%, #000 100%);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow: hidden;
      position: relative;
    }

    /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∞—Å—Ç–∏—Ü—ã */
    .particles {
      position: fixed;
      inset: 0;
      z-index: 1;
    }

    .particle {
      position: absolute;
      width: 3px;
      height: 3px;
      background: linear-gradient(45deg, #ff6ec7, #4facfe);
      border-radius: 50%;
      animation: float 6s infinite ease-in-out;
    }

    @keyframes float {
      0%, 100% { 
        transform: translateY(0px) translateX(0px) scale(1);
        opacity: 0.4;
      }
      50% { 
        transform: translateY(-20px) translateX(10px) scale(1.2);
        opacity: 1;
      }
    }

    /* –û—Å–Ω–æ–≤–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ */
    .main-container {
      position: relative;
      z-index: 10;
      max-width: 420px;
      width: 95%;
      padding: 20px;
    }

    .lock-container {
      text-align: center;
      margin-bottom: 30px;
      animation: lockPulse 3s infinite ease-in-out;
    }

    @keyframes lockPulse {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.05) rotate(1deg); }
    }

    .lock-icon {
      font-size: clamp(60px, 15vw, 90px);
      background: linear-gradient(135deg, #ff6ec7, #4facfe, #00f2fe);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      filter: drop-shadow(0 0 20px rgba(255, 110, 199, 0.5));
      animation: glow 2s infinite alternate;
    }

    @keyframes glow {
      from { filter: drop-shadow(0 0 20px rgba(255, 110, 199, 0.5)); }
      to { filter: drop-shadow(0 0 40px rgba(79, 172, 254, 0.8)); }
    }

    .card {
      background: linear-gradient(145deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        rgba(255, 255, 255, 0.05) 50%, 
        rgba(0, 0, 0, 0.1) 100%);
      backdrop-filter: blur(25px);
      border: 2px solid transparent;
      background-clip: padding-box;
      border-radius: 35px;
      padding: clamp(25px, 6vw, 45px);
      text-align: center;
      box-shadow: 
        0 25px 80px rgba(0,0,0,0.3),
        0 0 60px rgba(255, 110, 199, 0.15),
        inset 0 1px 0 rgba(255,255,255,0.2),
        inset 0 -1px 0 rgba(0,0,0,0.2);
      position: relative;
      overflow: hidden;
      animation: cardFloat 4s infinite ease-in-out;
    }

    @keyframes cardFloat {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      50% { transform: translateY(-5px) rotate(0.5deg); }
    }

    .card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, transparent, rgba(255, 110, 199, 0.1), transparent);
      border-radius: 35px;
      animation: shimmer 3s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .card h2 {
      margin: 0 0 30px 0;
      font-size: clamp(20px, 5vw, 28px);
      font-weight: 700;
      background: linear-gradient(135deg, #ff6ec7, #4facfe, #00f2fe);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      position: relative;
      z-index: 2;
      text-shadow: 0 0 30px rgba(255, 110, 199, 0.3);
    }

    .digits-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: clamp(12px, 3vw, 20px);
      margin-bottom: 25px;
      position: relative;
      z-index: 2;
    }

    .digit {
      width: 100%;
      height: clamp(70px, 18vw, 90px);
      text-align: center;
      font-size: clamp(28px, 8vw, 42px);
      font-weight: 900;
      color: #fff;
      border-radius: 22px;
      border: 3px solid transparent;
      background: 
        linear-gradient(145deg, #2a1a4a, #1a0f35) padding-box,
        linear-gradient(135deg, #ff6ec7, #4facfe) border-box;
      outline: none;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      caret-color: #ff6ec7;
      text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
      position: relative;
      cursor: pointer;
      user-select: none;
    }

    .digit::before {
      content: '';
      position: absolute;
      inset: -2px;
      background: linear-gradient(135deg, #ff6ec7, #4facfe, #00f2fe);
      border-radius: 22px;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }

    .digit:focus::before,
    .digit:hover::before {
      opacity: 1;
    }

    .digit:focus {
      transform: scale(1.08) translateY(-3px);
      box-shadow: 
        0 15px 35px rgba(0,0,0,0.4),
        0 0 30px rgba(255, 110, 199, 0.6),
        0 0 60px rgba(79, 172, 254, 0.3);
      text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
    }

    .digit:hover:not(:focus) {
      transform: scale(1.02) translateY(-1px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
    }

    .digit:active {
      transform: scale(0.98);
      transition: transform 0.1s ease;
    }

    .digit.filled {
      background: 
        linear-gradient(145deg, #3a2a6a, #2a1f55) padding-box,
        linear-gradient(135deg, #ff6ec7, #4facfe) border-box;
      animation: fillPulse 0.3s ease;
    }

    @keyframes fillPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }

    .status {
      margin-top: 20px;
      font-size: clamp(14px, 4vw, 18px);
      font-weight: 600;
      min-height: 25px;
      transition: all 0.4s ease;
      position: relative;
      z-index: 2;
    }

    .status.ok {
      color: #00f2fe;
      text-shadow: 0 0 15px rgba(0, 242, 254, 0.8);
      animation: success-glow 1s ease infinite alternate;
    }

    @keyframes success-glow {
      from { text-shadow: 0 0 15px rgba(0, 242, 254, 0.8); }
      to { text-shadow: 0 0 25px rgba(0, 242, 254, 1), 0 0 35px rgba(79, 172, 254, 0.6); }
    }

    .status.err {
      color: #ff6b9d;
      text-shadow: 0 0 15px rgba(255, 107, 157, 0.8);
      animation: error-shake 0.6s ease;
    }

    @keyframes error-shake {
      0%, 100% { transform: translateX(0); }
      20% { transform: translateX(-8px); }
      40% { transform: translateX(8px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
    }

    /* –≠—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è —É—Å–ø–µ—Ö–∞ */
    .hearts-layer, .confetti-layer, .fireworks-layer {
      position: fixed;
      inset: 0;
      pointer-events: none;
      overflow: hidden;
      z-index: 20;
    }

    .heart {
      position: fixed;
      bottom: -40px;
      font-size: clamp(25px, 6vw, 40px);
      opacity: 0.95;
      filter: drop-shadow(0 0 15px currentColor);
    }

    @keyframes floatUp {
      from {
        transform: translateY(0) translateX(0) rotate(0deg) scale(1);
        opacity: 1;
      }
      50% {
        opacity: 1;
        transform: translateY(-50vh) translateX(var(--dx)) rotate(var(--rot)) scale(1.2);
      }
      to {
        transform: translateY(-120vh) translateX(var(--dx)) rotate(var(--rot)) scale(0.8);
        opacity: 0;
      }
    }

    .confetti {
      position: absolute;
      width: 12px;
      height: 12px;
      top: -20px;
      border-radius: 3px;
    }

    @keyframes confettiFall {
      to {
        transform: translateY(120vh) rotate(720deg) scale(0.5);
        opacity: 0;
      }
    }

    .firework {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
    }

    @keyframes fireworkExplode {
      0% {
        transform: scale(0);
        opacity: 1;
      }
      100% {
        transform: scale(20);
        opacity: 0;
      }
    }

    .message {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-size: clamp(32px, 8vw, 56px);
      font-weight: 900;
      background: linear-gradient(45deg, #ff6ec7, #4facfe, #00f2fe, #ff6ec7);
      background-size: 300% 300%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      opacity: 0;
      display: none;
      text-align: center;
      z-index: 25;
      padding: 20px;
      animation: messageReveal 4s ease forwards, rainbowText 3s ease infinite;
    }

    @keyframes messageReveal {
      0% {
        opacity: 0;
        transform: scale(0.3) rotate(-15deg);
      }
      30% {
        opacity: 1;
        transform: scale(1.2) rotate(5deg);
      }
      60% {
        transform: scale(0.95) rotate(-2deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0deg);
      }
    }

    @keyframes rainbowText {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .message-subtitle {
      font-size: 0.4em;
      margin-top: 15px;
      opacity: 0;
      animation: subtitleFade 2s ease 2s forwards;
      background: linear-gradient(45deg, #ffeaa7, #fab1a0);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    @keyframes subtitleFade {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* –£–ª—É—á—à–µ–Ω–Ω—ã–π –∑–∞–º–æ–∫ */
    .lock-glow {
      position: absolute;
      inset: -10px;
      background: conic-gradient(from 0deg, #ff6ec7, #4facfe, #00f2fe, #43e97b, #ff6ec7);
      border-radius: 50%;
      opacity: 0.6;
      animation: lockRotate 4s linear infinite;
      z-index: -1;
    }

    @keyframes lockRotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* –ú–æ–±–∏–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è */
    @media (max-width: 768px) {
      .main-container {
        width: 90%;
        padding: 15px;
      }
      
      .card {
        padding: 30px 25px;
      }
      
      .digits-container {
        gap: 10px;
      }
    }

    @media (max-width: 480px) {
      .digits-container {
        gap: 8px;
      }
      
      .digit {
        height: clamp(60px, 16vw, 75px);
        font-size: clamp(24px, 7vw, 32px);
      }
    }

    /* –≠—Ñ—Ñ–µ–∫—Ç –ø–µ—á–∞—Ç–∏ –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ */
    .typing-text {
      overflow: hidden;
      border-right: 3px solid #ff6ec7;
      white-space: nowrap;
      margin: 0 auto;
      animation: typing 2s steps(30) 1s forwards, blink 1s infinite;
      width: 0;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 100%; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã */
    .magic-circle {
      position: absolute;
      width: 200px;
      height: 200px;
      border: 2px solid rgba(255, 110, 199, 0.3);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: magicSpin 10s linear infinite;
      z-index: -1;
    }

    @keyframes magicSpin {
      from { transform: translate(-50%, -50%) rotate(0deg); }
      to { transform: translate(-50%, -50%) rotate(360deg); }
    }

    .magic-circle::before {
      content: '';
      position: absolute;
      width: 150px;
      height: 150px;
      border: 1px solid rgba(79, 172, 254, 0.4);
      border-radius: 50%;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      animation: magicSpin 8s linear infinite reverse;
    }

    /* –ó–≤—É–∫–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ */
    .sound-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid rgba(255, 110, 199, 0.5);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      transition: all 0.3s ease;
      z-index: 30;
      backdrop-filter: blur(10px);
    }

    .sound-toggle:hover {
      background: rgba(255, 110, 199, 0.2);
      transform: scale(1.1);
    }

    /* –ü–æ–¥—Å–∫–∞–∑–∫–∞ */
    .hint {
      position: absolute;
      bottom: -50px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 12px;
      color: rgba(255, 255, 255, 0.6);
      opacity: 0;
      animation: hintFade 3s ease 3s forwards;
    }

    @keyframes hintFade {
      0%, 70% { opacity: 0; transform: translateX(-50%) translateY(10px); }
      100% { opacity: 1; transform: translateX(-50%) translateY(0); }
    }
  </style>
</head>
<body>
  <div class="particles" id="particles"></div>
  
  <div class="main-container">
    <div class="lock-container">
      <div class="lock-glow"></div>
      <div class="lock-icon">üîê</div>
    </div>
    
    <div class="card" id="card">
      <div class="magic-circle"></div>
      
      <h2 class="typing-text">‚ú® –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø—Ä–∏–Ω—Ü–µ—Å—Å—ã ‚ú®</h2>
      
      <div class="digits-container" id="digitsContainer">
        <input class="digit" type="tel" maxlength="1" autocomplete="off" inputmode="numeric">
        <input class="digit" type="tel" maxlength="1" autocomplete="off" inputmode="numeric">
        <input class="digit" type="tel" maxlength="1" autocomplete="off" inputmode="numeric">
        <input class="digit" type="tel" maxlength="1" autocomplete="off" inputmode="numeric">
      </div>
      
      <div class="status" id="status"></div>
      <div class="hint">üí° –ü–æ–ø—Ä–æ–±—É–π –¥–∞—Ç—É –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è...</div>
    </div>
  </div>

  <div class="sound-toggle" id="soundToggle" title="–í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∑–≤—É–∫">üîä</div>

  <div class="hearts-layer" id="hearts"></div>
  <div class="confetti-layer" id="confetti"></div>
  <div class="fireworks-layer" id="fireworks"></div>
  
  <div class="message" id="message">
    üéâ –°—é—Ä–ø—Ä–∏–∑ –¥–ª—è –º–æ–µ–π –ª—é–±–∏–º–æ–π —Å–µ—Å—Ç—Ä—ë–Ω–∫–∏! üéâ
    <div class="message-subtitle">–¢—ã —Å–∞–º–∞—è –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–∞—è –≤ –º–∏—Ä–µ! üíñ</div>
  </div>
  
  <!-- –ú—É–∑—ã–∫–∞ -->
  <audio id="bg-music" loop>
    <source src="./WhatsApp Video 2025-09-02 at 14.02.15.mp3" type="audio/mpeg">
    <source src="music.ogg" type="audio/ogg">
    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç.
  </audio>

  <script>
    const PASSCODE = "7531";
    let soundEnabled = true;

    // –≠–ª–µ–º–µ–Ω—Ç—ã
    const inputs = Array.from(document.querySelectorAll('.digit'));
    const statusEl = document.getElementById('status');
    const card = document.getElementById('card');
    const heartsLayer = document.getElementById('hearts');
    const confettiLayer = document.getElementById('confetti');
    const fireworksLayer = document.getElementById('fireworks');
    const message = document.getElementById('message');
    const soundToggle = document.getElementById('soundToggle');
    const particlesContainer = document.getElementById('particles');
    const music = document.getElementById('bg-music');    

    // –°–æ–∑–¥–∞–Ω–∏–µ —á–∞—Å—Ç–∏—Ü —Ñ–æ–Ω–∞
    function createParticles() {
      for (let i = 0; i < 50; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';
        particle.style.left = Math.random() * 100 + '%';
        particle.style.top = Math.random() * 100 + '%';
        particle.style.animationDelay = Math.random() * 6 + 's';
        particle.style.animationDuration = (4 + Math.random() * 4) + 's';
        particlesContainer.appendChild(particle);
      }
    }

    // –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Å Web Audio API
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    
    function playTone(frequency, duration, type = 'sine') {
      if (!soundEnabled) return;
      
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
      oscillator.type = type;
      
      gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + duration);
    }

    function playSuccessSound() {
      if (!soundEnabled) return;
      
      const notes = [523.25, 659.25, 783.99, 1046.50]; // –î–æ, –ú–∏, –°–æ–ª—å, –î–æ –æ–∫—Ç–∞–≤–∞
      notes.forEach((note, i) => {
        setTimeout(() => playTone(note, 0.3), i * 150);
      });
    }

    function playErrorSound() {
      if (!soundEnabled) return;
      playTone(200, 0.5, 'sawtooth');
    }

    function playClickSound() {
      if (!soundEnabled) return;
      playTone(800, 0.1);
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–≤—É–∫–æ–º
    soundToggle.addEventListener('click', () => {
      soundEnabled = !soundEnabled;
      soundToggle.textContent = soundEnabled ? 'üîä' : 'üîá';
      soundToggle.style.color = soundEnabled ? '#00f2fe' : '#666';
      playClickSound();
      
      // –í–∫–ª—é—á–∞–µ–º/–≤—ã–∫–ª—é—á–∞–µ–º —Ñ–æ–Ω–æ–≤—É—é –º—É–∑—ã–∫—É
      if (soundEnabled) {
        music.play().catch(e => console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: ", e));
      } else {
        music.pause();
      }
    });

    const getCode = () => inputs.map(i => i.value).join('');

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞
    inputs.forEach((input, idx) => {
      // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –ø—Ä–æ–±–ª–µ–º—ã —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
      input.addEventListener('touchstart', (e) => {
        e.preventDefault();
        input.focus();
      });

      input.addEventListener('input', e => {
        playClickSound();
        
        // –¢–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã
        const value = e.target.value.replace(/\D/g, '').slice(0, 1);
        e.target.value = value;
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏
        if (value) {
          e.target.classList.add('filled');
          setTimeout(() => e.target.classList.remove('filled'), 300);
        }
        
        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø–æ–ª—é
        if (value && idx < inputs.length - 1) {
          setTimeout(() => inputs[idx + 1].focus(), 100);
        }
        
        checkIfComplete();
      });

      input.addEventListener('keydown', e => {
        if (e.key === 'Backspace' && !e.target.value && idx > 0) {
          inputs[idx - 1].focus();
          setTimeout(() => inputs[idx - 1].select(), 50);
        }
        if (e.key === 'Enter') {
          checkIfComplete();
        }
        if (e.key === 'ArrowLeft' && idx > 0) {
          inputs[idx - 1].focus();
        }
        if (e.key === 'ArrowRight' && idx < inputs.length - 1) {
          inputs[idx + 1].focus();
        }
      });

      // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å—Ç–∞–≤–∫–∏
      input.addEventListener('paste', e => {
        e.preventDefault();
        const paste = (e.clipboardData || window.clipboardData).getData('text');
        const digits = paste.replace(/\D/g, '').slice(0, 4);
        
        digits.split('').forEach((digit, index) => {
          if (inputs[index]) {
            inputs[index].value = digit;
            inputs[index].classList.add('filled');
            setTimeout(() => inputs[index].classList.remove('filled'), 300);
          }
        });
        
        if (digits.length > 0) {
          const lastIndex = Math.min(digits.length - 1, inputs.length - 1);
          inputs[lastIndex].focus();
        }
        
        checkIfComplete();
      });

      // –û—á–∏—Å—Ç–∫–∞ –Ω–∞ –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫
      input.addEventListener('dblclick', () => {
        inputs.forEach(inp => inp.value = '');
        inputs[0].focus();
        statusEl.textContent = '';
        statusEl.className = 'status';
      });
    });

    function checkIfComplete() {
      const code = getCode();
      if (code.length === 4) {
        if (code === PASSCODE) {
          success();
        } else {
          failure();
        }
      } else {
        statusEl.textContent = '';
        statusEl.className = 'status';
      }
    }

    function success() {
      statusEl.textContent = 'üéÄ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, –ø—Ä–∏–Ω—Ü–µ—Å—Å–∞! üéÄ';
      statusEl.className = 'status ok';
      
      playSuccessSound();
      
      // –í–∫–ª—é—á–∞–µ–º –º—É–∑—ã–∫—É –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
      if (soundEnabled) {
        music.play().catch(e => console.log("–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ: ", e));
      }
      
      inputs.forEach(input => {
        input.disabled = true;
        input.style.background = 'linear-gradient(145deg, #4a6741, #2d4a27) padding-box, linear-gradient(135deg, #43e97b, #38f9d7) border-box';
      });
      
      setTimeout(() => {
        card.style.opacity = "0";
        card.style.transform = "scale(0.8) rotateY(180deg)";
        
        setTimeout(() => {
          card.style.display = "none";
          message.style.display = "flex";
          launchFullCelebration();
        }, 800);
      }, 1200);
    }

    function failure() {
      statusEl.textContent = 'üíî –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë —Ä–∞–∑, —Å–æ–ª–Ω—ã—à–∫–æ';
      statusEl.className = 'status err';
      
      playErrorSound();
      
      // –≠—Ñ—Ñ–µ–∫—Ç —Ç—Ä—è—Å–∫–∏
      card.style.animation = 'error-shake 0.6s ease';
      inputs.forEach(input => {
        input.style.borderColor = '#ff6b9d';
        input.style.boxShadow = '0 0 20px rgba(255, 107, 157, 0.5)';
      });
      
      setTimeout(() => {
        inputs.forEach(i => {
          i.value = '';
          i.disabled = false;
          i.style.borderColor = '';
          i.style.boxShadow = '';
        });
        inputs[0].focus();
        card.style.animation = '';
        statusEl.textContent = '';
        statusEl.className = 'status';
      }, 1500);
    }

    function launchFullCelebration() {
      launchHearts(200);
      launchConfetti(150);
      launchFireworks(20);
      
      // –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —ç—Ñ—Ñ–µ–∫—Ç—ã
      const celebrationInterval = setInterval(() => {
        launchHearts(80);
        launchConfetti(60);
        launchFireworks(8);
      }, 4000);
      
      // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ—Ä–µ–∑ –º–∏–Ω—É—Ç—É
      setTimeout(() => clearInterval(celebrationInterval), 60000);
    }

    function launchHearts(count) {
      const heartSymbols = ['üíñ', 'üíó', 'üíû', '‚ù§Ô∏è', 'üíï', 'üíò', 'üíì', 'üíù', 'üíü', 'üíú', 'üß°', 'üíõ'];
      
      for (let i = 0; i < count; i++) {
        const heart = document.createElement('span');
        heart.className = 'heart';
        heart.textContent = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
        
        const left = Math.random() * 100;
        const size = 20 + Math.random() * 30;
        const duration = 5 + Math.random() * 3;
        const dx = (Math.random() * 400 - 200) + 'px';
        const rot = (Math.random() * 720 - 360) + 'deg';
        const delay = Math.random() * 3;
        
        heart.style.left = left + 'vw';
        heart.style.fontSize = size + 'px';
        heart.style.setProperty('--dx', dx);
        heart.style.setProperty('--rot', rot);
        heart.style.animation = `floatUp ${duration}s ease-out ${delay}s forwards`;
        
        heartsLayer.appendChild(heart);
        setTimeout(() => heart.remove(), (duration + delay) * 1000 + 200);
      }
    }

    function launchConfetti(count) {
      const colors = ['#ff6ec7', '#4facfe', '#00f2fe', '#43e97b', '#38f9d7', '#ffeaa7', '#fab1a0', '#fd79a8'];
      
      for (let i = 0; i < count; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.animationDuration = (4 + Math.random() * 4) + 's';
        confetti.style.animationDelay = Math.random() * 3 + 's';
        confetti.style.animation = `confettiFall ${4 + Math.random() * 4}s linear ${Math.random() * 3}s forwards`;
        
        confettiLayer.appendChild(confetti);
        setTimeout(() => confetti.remove(), 10000);
      }
    }

    function launchFireworks(count) {
      const colors = ['#ff6ec7', '#4facfe', '#00f2fe', '#43e97b', '#ffeaa7'];
      
      for (let i = 0; i < count; i++) {
        setTimeout(() => {
          const x = 20 + Math.random() * 60;
          const y = 20 + Math.random() * 60;
          
          for (let j = 0; j < 12; j++) {
            const firework = document.createElement('div');
            firework.className = 'firework';
            firework.style.left = x + '%';
            firework.style.top = y + '%';
            firework.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            firework.style.animation = `fireworkExplode 1s ease-out forwards`;
            
            const angle = (j * 30) * Math.PI / 180;
            const distance = 50 + Math.random() * 50;
            const dx = Math.cos(angle) * distance;
            const dy = Math.sin(angle) * distance;
            
            firework.style.transform = `translate(${dx}px, ${dy}px)`;
            
            fireworksLayer.appendChild(firework);
            setTimeout(() => firework.remove(), 1000);
          }
        }, i * 500);
      }
    }

    // –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
    function createVirtualKeyboard() {
      if (window.innerWidth <= 768) {
        const keyboard = document.createElement('div');
        keyboard.style.cssText = `
          position: fixed;
          bottom: 20px;
          left: 50%;
          transform: translateX(-50%);
          display: grid;
          grid-template-columns: repeat(5, 1fr);
          gap: 10px;
          background: rgba(255, 255, 255, 0.1);
          backdrop-filter: blur(20px);
          padding: 20px;
          border-radius: 20px;
          border: 1px solid rgba(255, 110, 199, 0.3);
          z-index: 15;
        `;
        
        for (let i = 0; i <= 9; i++) {
          const key = document.createElement('button');
          key.textContent = i;
          key.style.cssText = `
            width: 45px;
            height: 45px;
            background: linear-gradient(145deg, #2a1a4a, #1a0f35);
            border: 2px solid rgba(255, 110, 199, 0.4);
            border-radius: 50%;
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
          `;
          
          key.addEventListener('click', () => {
            const emptyInput = inputs.find(input => !input.value && !input.disabled);
            if (emptyInput) {
              emptyInput.value = i.toString();
              emptyInput.dispatchEvent(new Event('input'));
              emptyInput.classList.add('filled');
              setTimeout(() => emptyInput.classList.remove('filled'), 300);
            }
          });
          
          key.addEventListener('touchstart', (e) => {
            e.preventDefault();
            key.style.transform = 'scale(0.9)';
            key.style.background = 'linear-gradient(145deg, #ff6ec7, #4facfe)';
          });
          
          key.addEventListener('touchend', () => {
            key.style.transform = 'scale(1)';
            key.style.background = 'linear-gradient(145deg, #2a1a4a, #1a0f35)';
          });
          
          keyboard.appendChild(key);
        }
        
        // –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏
        const clearKey = document.createElement('button');
        clearKey.textContent = '‚å´';
        clearKey.style.cssText = key.style.cssText;
        clearKey.addEventListener('click', () => {
          const lastFilledInput = [...inputs].reverse().find(input => input.value && !input.disabled);
          if (lastFilledInput) {
            lastFilledInput.value = '';
            lastFilledInput.focus();
            checkIfComplete();
          }
        });
        
        keyboard.appendChild(clearKey);
        document.body.appendChild(keyboard);
      }
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
    document.addEventListener('DOMContentLoaded', () => {
      createParticles();
      createVirtualKeyboard();
      
      // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
      setTimeout(() => {
        inputs[0].focus();
      }, 500);
      
      // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∞—É–¥–∏–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
      document.addEventListener('click', () => {
        if (audioContext.state === 'suspended') {
          audioContext.resume();
        }
      }, { once: true });
    });

    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à
    document.addEventListener('keydown', (e) => {
      if (/^\d$/.test(e.key)) {
        const emptyInput = inputs.find(input => !input.value && !input.disabled);
        if (emptyInput) {
          emptyInput.focus();
          emptyInput.value = e.key;
          emptyInput.dispatchEvent(new Event('input'));
        }
      }
      if (e.key === 'Escape') {
        inputs.forEach(i => i.value = '');
        inputs[0].focus();
        statusEl.textContent = '';
        statusEl.className = 'status';
      }
    });

    // –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Å–∞–Ω–∏–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö
    let touchStartTime = 0;
    inputs.forEach((input, idx) => {
      input.addEventListener('touchstart', (e) => {
        touchStartTime = Date.now();
        input.style.transform = 'scale(1.05)';
      });
      
      input.addEventListener('touchend', (e) => {
        const touchDuration = Date.now() - touchStartTime;
        input.style.transform = 'scale(1)';
        
        // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –¥–≤–æ–π–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
        if (touchDuration < 500) {
          setTimeout(() => {
            input.focus();
            if (window.navigator && window.navigator.vibrate) {
              window.navigator.vibrate(50);
            }
          }, 50);
        }
      });
    });

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
    inputs.forEach(input => {
      input.addEventListener('mouseenter', () => {
        if (!input.disabled) {
          input.style.boxShadow = '0 0 25px rgba(255, 110, 199, 0.4)';
        }
      });
      
      input.addEventListener('mouseleave', () => {
        if (!input.disabled && document.activeElement !== input) {
          input.style.boxShadow = '';
        }
      });
    });

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏
    window.addEventListener('orientationchange', () => {
      setTimeout(() => {
        location.reload();
      }, 500);
    });

    // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
    let lastTouchEnd = 0;
    document.addEventListener('touchend', function (event) {
      const now = Date.now();
      if (now - lastTouchEnd <= 300) {
        event.preventDefault();
      }
      lastTouchEnd = now;
    }, false);

    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
    setInterval(() => {
      if (Math.random() < 0.3) {
        const sparkle = document.createElement('div');
        sparkle.style.cssText = `
          position: fixed;
          width: 6px;
          height: 6px;
          background: white;
          border-radius: 50%;
          left: ${Math.random() * 100}%;
          top: ${Math.random() * 100}%;
          z-index: 5;
          animation: sparkleAnimation 1.5s ease forwards;
          pointer-events: none;
        `;
        document.body.appendChild(sparkle);
        setTimeout(() => sparkle.remove(), 1500);
      }
    }, 2000);
  </script>
</body>
</html>